<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
        "http://www.w3.org/TR/REC-html40/loose.dtd">

 <%title="Using the Google visualisation API with R"%>
 
<html>
  <%@include file="src/simpleHead.rsp"%>
  
  <body>
    <%@include file="src/simpleHeader.rsp"%>
    
    <p>
      by Markus Gesmann 2010-<%=format(Sys.Date(), "%Y")%>.
    </p>
    <h2>
      Wellcome
    </h2>
    Wellcome
    to <a href="http://code.google.com/p/google-motion-charts-with-r/"><b>googleVis</b></a> 
    version <%=packageDescription("googleVis")$Version%> by:
    <a href="mailto:markus.gesmann@gmail.com">Markus Gesmann</a>
    and <a href="mailto:decastillo@gmail.com">Diego de Castillo</a>
    <h2>
      Introduction
    </h2> 
    <p>
     <tt>googleVis</tt> is a package
     for <a href="http://www.r-project.org">R</a> which provides
     functions to visualise data in R with
     the <a href="http://code.google.com/apis/visualization/documentation/gallery.html">Google
     Visualisation API.</a> 
    </p>
    <p>     
      The visual ouput will be rendered in your
     browser using Flash. Please see also
     Google's <a href="http://code.google.com/apis/visualization/terms.html">Terms
     of Use</a>.
    </p>
    <p>    
      Type <tt>?googleVis</tt> in R to see the overall documentation and <tt>vignette('googleVis')</tt> to see the package vignette.
      This page provides some examples below, and you find more demos with: <tt>demo(package='googleVis')</tt>.
    </p>
    By default the output of the <tt>googleVis</tt> functions will be stored in the following directory: 
    <ul>
      <li><%=system.file(file.path("rsp", "myAnalysis"), package="googleVis")%>.
    </ul>
    However, the pages will be hosted here:
    <ul>
      <li> <a href="myAnalysis/index.rsp">myAnalysis</a>.
    </ul>
    For example the follwing R commands
    <pre>
      require(googleVis)
      M &lt;- gvisMotionChart(Fruits, idvar="Fruit", timevar="Year")
      plot(M)
    </pre>
    would generate the file <tt>MotionChart_%date()%.rsp</tt> in the above directory.
    
    <h2>
      Embedding googleVis charts in your web page with <a href="/">R.rsp</a>
    </h2>
    <p>
      The R
      package <tt><a href="http://cran.r-project.org/package=R.rsp">R.rsp</a></tt>
      provides a lightweight web-server which we are using here to
      display these pages. Additionally the <tt>R.rsp</tt>
      packages allows us to dynamically generate documents into
      static content using R Server Pages. This means we can mix html and R 
      code to create content on the fly. 
    </p>
    <p>
      For more information
      on <tt>R.rsp</tt> see <a href="/">here.</a>
    </p>
    <h2>Examples with googleVis</h2>
    You can embbed googleVis charts quite easily in your rsp page.
    <p>
      For example 
      <pre>
	&lt;%=gvisGeoMap(Exports[,1:2], options=list(width=600,
	height=500))$html$Chart%&gt;
      </pre> 
      gives you:
    </p>
    <p>
      <%=gvisGeoMap(Exports[,1:2], options=list(width=600, height=500))$html$Chart%>
      See also: <a href="http://code.google.com/apis/visualization/documentation/gallery/geomap.html">Google
      Geo Map API</a>  
    </p>
    <p>
      For a Motion Chart we would write somthing like 
      <pre>
	&lt;%=gvisMotionChart(Fruits, idvar="Fruit", timevar="Year",
	options=list(width=600, height=500))$html$Chart%&gt;
      </pre> 
    </p>
    <p>
      <%=gvisMotionChart(Fruits, idvar="Fruit", timevar="Year",  options=list(width=600, height=500))$html$Chart%>
      See also :<a href="http://code.google.com/apis/visualization/documentation/gallery/geomap.html">Google
	Motion Chart API</a>  
    </p>
    <p>
      A Tree Map can be generated with 
      <pre>
	&lt;%=gvisTreeMap(Regions, options=list(width=600, height=500,
	showScale=TRUE, fontSize=16))$html$Chart%&gt;
      </pre> 
    </p>
    <p>
      <%=gvisTreeMap(Regions, options=list(width=600, height=500,  showScale=TRUE, fontSize=16))$html$Chart%>
      See also :<a href="http://code.google.com/apis/visualization/documentation/gallery/treemap.html">Google
	Tree Map API</a>  
    </p>
    <p>
      To display a table we write 
      <pre>
	&lt;%=gvisTable(Exports, options=list(width=600, height=300))$html$Chart%&gt;
     </pre> 
    </p>
    <p>
      <%=gvisTable(Exports, options=list(width=600, height=300))$html$Chart%>
      See also: <a href="http://code.google.com/apis/visualization/documentation/gallery/table.html">Google
      Table API</a>  
    </p>
  <p>
      Here is an example of R code, which is embedded into this page to
      get a list of files of the <tt>myAnalysis</tt> directory wrapped with
      html list and anchor tags.
      <!-- Display code in html format -->
      <pre>
	&lt;% cat(paste("&lt;li&gt; &lt;a href='",
        dir(system.file(paste("rsp","myAnalysis", sep=.Platform$file.sep),
        package="googleVis")),"'&gt;",
        dir(system.file(paste("rsp","myAnalysis", sep=.Platform$file.sep),
        package="googleVis")),"&lt;/a&gt;\n", sep=""),
	file=paste(system.file(paste("rsp","myAnalysis",
	sep=.Platform$file.sep), package="googleVis"),
	"dirlist.rsp", sep=.Platform$file.sep)) %&gt;
      </pre>
      <!-- Actual rsp code -->
      <% cat(paste("<li> <a href='", dir(system.file(paste("rsp","myAnalysis", sep=.Platform$file.sep), package="googleVis")),"'>",   dir(system.file(paste("rsp","myAnalysis",  sep=.Platform$file.sep), package="googleVis")), "</a>\n",   sep=""),  file=paste(system.file(paste("rsp","myAnalysis",   sep=.Platform$file.sep), package="googleVis"),   "dirlist.rsp", sep=.Platform$file.sep)) %>
    </p>
    <p>
      The R code reads the files of the directory <tt>myAnalysis</tt> via a system
      call and writes the output with html tags into the file <tt><a href="myAnalysis/dirlist.rsp">dirlist.rsp</a></tt>.
    </p>
    <p>
      Hence the file <tt><a href="myAnalysis/dirlist.rsp">dirlist.rsp</a></tt> contains content of the
      directory as a html list and we can embed the file via the following
      statement <tt>&lt;%@include file="dirlist.rsp"%&gt;</tt>
      into a new R.rsp page: <a href="myAnalysis/index.rsp">myAnalysis/index.rsp</a>.
    </p>
    <p>
      I hope these examples show you how you can generate content
      with functions from the <tt>R.rsp</tt> and <tt>googleVis</tt>
      packages.
    </p>
    <p>
    </p>
    <small>
      <em>If a page is loading "forever", that is, the internal web server seems to be stuck, try to press ENTER in the main R window.  This normally helps.</em>
    </small>
    


    <%@include file="src/simpleFooter.rsp"%>
  </body>
</html>


